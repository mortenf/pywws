<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pywws.Plot &mdash; documentation pywws 13.09_r1069</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '13.09_r1069',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/pywws_logo.ico"/>
    <link rel="top" title="documentation pywws 13.09_r1069" href="../index.html" />
    <link rel="up" title="Programmes et des modules Python" href="index.html" />
    <link rel="next" title="pywws.WindRose" href="pywws.WindRose.html" />
    <link rel="prev" title="pywws.calib" href="pywws.calib.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="pywws.WindRose.html" title="pywws.WindRose"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="pywws.calib.html" title="pywws.calib"
             accesskey="P">précédent</a> |</li>
        <li><a href="../index.html">documentation pywws 13.09_r1069</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Programmes et des modules Python</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-pywws.Plot">
<span id="pywws-plot"></span><h1>pywws.Plot<a class="headerlink" href="#module-pywws.Plot" title="Lien permanent vers ce titre">¶</a></h1>
<p>Trace les graphes de données météorologiques selon une recette XML.</p>
<div class="highlight-python"><div class="highlight"><pre>usage: python -m pywws.Plot [options] data_dir temp_dir xml_file output_file
options are:
 -h or --help    display this help
data_dir is the root directory of the weather data
temp_dir is a workspace for temporary files e.g. /tmp
xml_file is the name of the source file that describes the plot
output_file is the name of the image file to be created e.g. 24hrs.png
</pre></div>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme Template.py celui-ci est un des modules les plus difficiles à utiliser dans le logiciel de collecte de la station météo. Il trace un graphe (ou un ensemble de graphes) de données météorologiques. Presque tout le graphe est contrôlé par un fichier XML. Je me réfère à ces fichiers en tant que modèles, mais ils ne sont pas des gabarits dans le même sens que Template.py les utilise pour créer des fichiers texte.</p>
<p>Avant d&#8217;écrire vos propres fichiers de gabarit de graphe, il pourrait être utile d&#8217;examiner quelques exemples dans le répertoire example_graph_templates. Si (comme moi) vous n&#8217;êtes pas familier avec le langage XML, je vous suggère de lire le tutoriel XML du Site du Zéro.</p>
<div class="section" id="xml-graph-file-syntax">
<h3>Syntaxe XML du fichier graphe<a class="headerlink" href="#xml-graph-file-syntax" title="Lien permanent vers ce titre">¶</a></h3>
<p>Voici le modèle de graphe utile le plus simple. Il trace la température extérieure pendant les 24 dernières heures.</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
&lt;graph&gt;
  &lt;plot&gt;
    &lt;subplot&gt;
      &lt;title&gt;Temperature (°C)&lt;/title&gt;
      &lt;ycalc&gt;data[&#39;temp_out&#39;]&lt;/ycalc&gt;
    &lt;/subplot&gt;
  &lt;/plot&gt;
&lt;/graph&gt;
</pre></div>
</div>
<p>Dans cet exemple, l&#8217;élément racine du graphe a un élément de tracé, lequel a un élément graphe secondaire. L&#8217;élément graphe secondaire contient un élément de titre et un élément ycalc. Pour tracer davantage de données sur le même ensemble d&#8217;axes (par exemple le point de rosée et la température), on peut ajouter plus d&#8217;éléments sous-graphe. Pour tracer plus d&#8217;un ensemble d&#8217;axes (par exemple la vitesse du vent qui est mesurée en unités différentes de la température) dans le même fichier, nous pouvons ajouter plus d&#8217;éléments de graphe.</p>
<p>La hiérarchie complète de l&#8217;élément est illustré ci-dessous.</p>
<div class="highlight-python"><div class="highlight"><pre>graph
    plot
        subplot
            xcalc
            ycalc
            axes
            style
            colour
            title
        bmargin
        yrange
        y2range
        ytics
        y2tics
        ylabel
        ylabelangle
        y2label
        y2labelangle
        grid
        source
        boxwidth
        title
        command
    start
    stop
    duration
    layout
    size
    fileformat
    terminal
    lmargin
    rmargin
    xformat
    xlabel
    dateformat
    xtics
    title
</pre></div>
</div>
</div>
<div class="section" id="graph">
<h3>graph<a class="headerlink" href="#graph" title="Lien permanent vers ce titre">¶</a></h3>
<p>C&#8217;est l&#8217;élément racine du fichier XML de graphe. Il n&#8217;a pas à être appelé &#8220;graph &#8221;, mais il doit y avoir exactement un élément racine.</p>
</div>
<div class="section" id="plot">
<h3>plot<a class="headerlink" href="#plot" title="Lien permanent vers ce titre">¶</a></h3>
<p>Chaque élément graphe doit contenir au moins un élément de tracé. Un graphe distinct est établi pour chaque élément de tracé, mais tous partagent le même axe X.</p>
</div>
<div class="section" id="start">
<h3>start<a class="headerlink" href="#start" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cet élément règle la date et l&#8217;heure de départ de l&#8217;axe X. Il est utilisé pour la construction d&#8217;un élément Python datetime. Par exemple, pour démarrer le graphe à midi (heure locale), le jour de Noel 2008: <code class="docutils literal"><span class="pre">&lt;start&gt;year=2008,</span> <span class="pre">month=12,</span> <span class="pre">day=25,</span> <span class="pre">hour=12&lt;/start&gt;</span></code>. La valeur par défaut est (stop - duration).</p>
</div>
<div class="section" id="stop">
<h3>stop<a class="headerlink" href="#stop" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cet élément règle la date et l&#8217;heure de fin de l&#8217;axe X. Il est utilisé pour la construction d&#8217;un élément Python datetime. Par exemple, pour terminer le graphe à 10h am (heure locale), le jour du Nouvel An: <code class="docutils literal"><span class="pre">&lt;stop&gt;year=2009,</span> <span class="pre">month=1,</span> <span class="pre">day=1,</span> <span class="pre">hour=10&lt;/stop&gt;</span></code>. La valeur par défaut est (start + duration), à moins que start ne soit pas définit dans lequel cas l&#8217;horodate de la dernière lecture horaire de la station météo est employée.</p>
</div>
<div class="section" id="duration">
<h3>duration<a class="headerlink" href="#duration" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cet élément définit l&#8217;étendue de l&#8217;axe X du graphique, à moins que start (début) et stop (arrêt) soient tous deux définis. Il est utilisé dans le construction d&#8217;un objet Python timedelta. Par exemple, pour tracer une semaine: <code class="docutils literal"><span class="pre">&lt;duration&gt;weeks=1&lt;/duration&gt;</span></code>. La valeur par défaut est hours=24.</p>
</div>
<div class="section" id="layout">
<h3>layout<a class="headerlink" href="#layout" title="Lien permanent vers ce titre">¶</a></h3>
<p>Contrôle la disposition des tracés. Par défaut sur une seule colonne. L&#8217;élément de mise en page définit les lignes et les colonnes. Par exemple: <code class="docutils literal"><span class="pre">&lt;layout&gt;4,</span> <span class="pre">2&lt;/layout&gt;</span></code> utilisera une grille de 4 lignes et 2 colonnes.</p>
</div>
<div class="section" id="size">
<h3>size<a class="headerlink" href="#size" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit les dimensions globales du fichier image contenant le graphe. Par défaut (dans une mise en page à simple colonne) une largeur de 600 pixels et une hauteur de 200 pixels pour chaque tracé est employé, donc la dimension d&#8217;un graphe avec quatre éléments tracés serait de 600 x 800 pixels. Tout élément de taille doit inclure à la fois la largeur et la hauteur. Par exemple: <code class="docutils literal"><span class="pre">&lt;size&gt;800,</span> <span class="pre">600&lt;/size&gt;</span></code> produira une image 800 pixels de large et 600 pixels de haut.</p>
</div>
<div class="section" id="fileformat">
<h3>fileformat<a class="headerlink" href="#fileformat" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit le format du fichier d&#8217;image contenant le graphe. Par défaut png. Toute chaîne reconnue par votre installation de gnuplot peut convenir. Par exemple: <code class="docutils literal"><span class="pre">&lt;fileformat&gt;gif&lt;/fileformat&gt;</span></code> va produire une image GIF.</p>
</div>
<div class="section" id="terminal">
<h3>terminal<a class="headerlink" href="#terminal" title="Lien permanent vers ce titre">¶</a></h3>
<p>Permet un contrôle complet des paramètres &#8216;terminal&#8217; de gnuplot. Vous pouvez utiliser cette option si vous tracez un format d&#8217;image inhabituel. Toute chaîne reconnue par la commande &#8216;terminal&#8217; de votre installation gnuplot devrait faire. Par exemple: <code class="docutils literal"><span class="pre">&lt;terminal&gt;svg</span> <span class="pre">enhanced</span> <span class="pre">font</span> <span class="pre">&quot;arial,9&quot;</span> <span class="pre">size</span> <span class="pre">600,800</span> <span class="pre">dynamic</span> <span class="pre">rounded&lt;/</span> <span class="pre">terminal&gt;</span></code>. Ce paramètre spécifie à la fois la taille et le format de fichier.</p>
</div>
<div class="section" id="lmargin">
<h3>lmargin<a class="headerlink" href="#lmargin" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit la marge gauche des graphes, c&#8217;est à dire la distance entre l&#8217;axe de gauche sur le bord gauche de la zone de l&#8217;image. Selon la documentation de gnuplot les unités de lmargin sont des largeurs de caractères. La valeur par défaut est de 5, ce qui devrait être OK dans la plupart des circonstances.</p>
</div>
<div class="section" id="rmargin">
<h3>rmargin<a class="headerlink" href="#rmargin" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit la marge droite des graphes, c&#8217;est à dire la distance entre l&#8217;axe de droite à l&#8217;extrémité droite de la zone d&#8217;image. Selon la documentation de gnuplot les unités de rmargin sont des largeurs de caractères. La valeur par défaut est -1, ce qui spécifie le réglage automatique.</p>
</div>
<div class="section" id="xformat">
<h3>xformat<a class="headerlink" href="#xformat" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit le format des étiquettes de date / heure xtic. La valeur est une chaîne de style format strftime. Par défaut elle dépend de la durée du graphe: 24 heures ou moins est &#8220;%H%M&#8221;, 24 heures sur 7 jours est &#8220;%a% d&#8221; et 7 jours ou plus est &#8220;%Y/%m/%d&#8221;.</p>
</div>
<div class="section" id="xlabel">
<h3>xlabel<a class="headerlink" href="#xlabel" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit l&#8217;étiquette d&#8217;axe X. La valeur est une chaîne de style format strftime. Par défaut dépend de la durée du graphe: 24 heures ou moins est &#8220;Time (%Z)&#8221;, de 24 heures à 7 jours est «Day» et 7 jours ou plus est «Date». Le datetime utilisé pour calculer ce départ, ce qui peut produire des résultats inattendus lorsqu&#8217;un graphique s&#8217;étend de début ou de fin DST.</p>
</div>
<div class="section" id="dateformat">
<h3>dateformat<a class="headerlink" href="#dateformat" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit le format des étiquettes de date à chaque extrémité de l&#8217;axe X. La valeur est une chaîne de style format strftime. Par défaut est &#8220;%Y/%m/%d&#8221;. L&#8217;étiquette de droite est uniquement affichée si elle diffère de la gauche. Pour avoir aucune étiquette, définissez un format vide: <code class="docutils literal"><span class="pre">&lt;dateformat&gt;&lt;/dateformat&gt;</span></code></p>
</div>
<div class="section" id="xtics">
<h3>xtics<a class="headerlink" href="#xtics" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit l&#8217;espacement des &#8220;tic&#8221; des marques sur l&#8217;axe X. La valeur est un nombre entier d&#8217;heures. La valeur par défaut est de laisser gnuplot définir l&#8217;intervalle approprié.</p>
</div>
<div class="section" id="title">
<h3>title<a class="headerlink" href="#title" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit le titre du graphe. Une seule ligne de texte, par exemple: <code class="docutils literal"><span class="pre">&lt;title&gt;La</span> <span class="pre">météo</span> <span class="pre">du</span> <span class="pre">jour&lt;/</span> <span class="pre">title&gt;</span></code>. Ce titre apparaît tout en haut du graphe, en dehors de toute zone de traçage.</p>
</div>
<div class="section" id="subplot">
<h3>subplot<a class="headerlink" href="#subplot" title="Lien permanent vers ce titre">¶</a></h3>
<p>Chaque élément du graphe doit contenir au moins un élément graphe secondaire. Une tracé distinct est établi pour chaque élément sous-graphe, mais tous partagent les même axes X et Y.</p>
</div>
<div class="section" id="bmargin">
<h3>bmargin<a class="headerlink" href="#bmargin" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit la marge inférieure, c&#8217;est à dire la distance entre la partie inférieure de l&#8217;axe X et le bord du graphique (ou le graphe suivante). La valeur par défaut est de laisser gnuplot ajuster automatiquement, ce qui fonctionne bien la plupart du temps, mais vous pouvez ajuster la valeur en fonction de votre installation.</p>
<p>La valeur autorisée est un nombre non négatif réel. Sur mon installation 0.9 est une bonne valeur, définie comme suit: <code class="docutils literal"><span class="pre">&lt;bmargin&gt;</span> <span class="pre">0.9&lt;/</span> <span class="pre">bmargin&gt;</span></code>.</p>
</div>
<div class="section" id="yrange">
<h3>yrange<a class="headerlink" href="#yrange" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit les limites inférieure et supérieure de l&#8217;axe Y gauche. La valeur est tout ce qui est recconnu par gnuplot, généralement une paire de nombres. La valeur par défaut est de permettre à gnuplot de définir les valeurs appropriées, ce qui est peu susceptible d&#8217;être ce que vous voulez. Par exemple, pour tracer des températures typiques du Royaume-Uni sans valeur va hors du graphe: <code class="docutils literal"><span class="pre">&lt;yrange&gt;-10,</span> <span class="pre">30&lt;/yrange&gt;</span></code>. Notez que les virgules sont converties en deux points, donc <code class="docutils literal"><span class="pre">&lt;yrange&gt;10:30&lt;/</span> <span class="pre">yrange&gt;</span></code> serait équivalent.</p>
<p>Vous pouvez utiliser un astérisque pour laisser gnuplot choisir une valeur appropriée. Par exemple, pour automatiser l&#8217;échelle de valeur supérieure, tout en fixant la valeur inférieure à zéro, utilisez <code class="docutils literal"><span class="pre">&lt;yrange&gt;0:*&lt;/yrange&gt;</span></code>.</p>
</div>
<div class="section" id="y2range">
<h3>y2range<a class="headerlink" href="#y2range" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit les limites inférieure et supérieure de l&#8217;axe Y de droite. Le défaut est pour l&#8217;axe Y de droite d&#8217;être la même que celle de gauche, mais fixer une plage différente est utile en double axe de traçage.</p>
</div>
<div class="section" id="ytics">
<h3>ytics<a class="headerlink" href="#ytics" title="Lien permanent vers ce titre">¶</a></h3>
<p>Contrôle les &#8220;tic&#8221; des marques sur l&#8217;axe Y de gauche. La valeur peut être tout ce qui est compris par gnuplot. Par exemple, pour définir l&#8217;espacement tic à 45 utiliser <code class="docutils literal"><span class="pre">&lt;ytics&gt;45&lt;/</span> <span class="pre">ytics&gt;</span></code>. Des choses plus complexes sont également possibles, par exemple étiqueter un diagramme de direction du vent avec des points de boussole, utilisez <code class="docutils literal"><span class="pre">&lt;y2tics&gt;('N'</span> <span class="pre">0,</span> <span class="pre">'E'</span> <span class="pre">90,</span> <span class="pre">'S'</span> <span class="pre">180,</span> <span class="pre">'W'</span> <span class="pre">270,</span> <span class="pre">'N'</span> <span class="pre">360)&lt;/</span> <span class="pre">y2tics&gt;</span></code>.</p>
</div>
<div class="section" id="y2tics">
<h3>y2tics<a class="headerlink" href="#y2tics" title="Lien permanent vers ce titre">¶</a></h3>
<p>Contrôle les &#8220;tic&#8221; des marques sur l&#8217;axe de droite. Le format est le même que celui de ytics. Le comportement par défaut consiste à copier les marques de graduation de gauche, mais sans étiquette.</p>
</div>
<div class="section" id="ylabel">
<h3>ylabel<a class="headerlink" href="#ylabel" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajoute une étiquette à gauche de l&#8217;axe Y. Par exemple, lors du tracé de la température: <code class="docutils literal"><span class="pre">&lt;ylabel&gt;°C&lt;/ylabel&gt;</span></code>. Si vous utilisez ylabel vous voudrez probablement ajuster lmargin.</p>
</div>
<div class="section" id="ylabelangle">
<h3>ylabelangle<a class="headerlink" href="#ylabelangle" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajuste l&#8217;angle de l&#8217;étiquette à gauche de l&#8217;axe Y, si votre version de gnuplot le soutient. Par exemple, pour écrire l&#8217;étiquette horizontalement: <code class="docutils literal"><span class="pre">&lt;ylabelangle&gt;90&lt;/ylabelangle&gt;</span></code>.</p>
</div>
<div class="section" id="y2label">
<h3>y2label<a class="headerlink" href="#y2label" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajoute une étiquette à l&#8217;axe Y de droite. Par exemple, lors du tracé de l&#8217;humidité: <code class="docutils literal"><span class="pre">&lt;y2label&gt;%&lt;/y2label&gt;</span></code>. Cela est principalement utilisé lors du traçage de graphes à deux axes. Si vous utilisez y2label vous voudrez probablement ajuster rmargin.</p>
</div>
<div class="section" id="y2labelangle">
<h3>y2labelangle<a class="headerlink" href="#y2labelangle" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajuste l&#8217;angle de l&#8217;étiquette d&#8217;axe Y à droite, si votre version de gnuplot le permet. Par exemple, pour écrire l&#8217;étiquette horizontalement: <code class="docutils literal"><span class="pre">&lt;y2labelangle&gt;90&lt;/</span> <span class="pre">y2labelangle&gt;</span></code>.</p>
</div>
<div class="section" id="grid">
<h3>grid<a class="headerlink" href="#grid" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajoute une grille au tracé. Dans la plupart des situations, la grille par défaut de gnuplot est appropriée, si aucune valeur n&#8217;est nécessaire: <code class="docutils literal"><span class="pre">&lt;grid&gt;&lt;/grid&gt;</span></code>. Plus de contrôle est possible en utilisant l&#8217;une des options comprises par la commande set grid de gnuplot. Par exemple, pour avoir les lignes horizontales de la grille uniquement: <code class="docutils literal"><span class="pre">&lt;grid&gt;ytics&lt;/grid&gt;</span></code>.</p>
</div>
<div class="section" id="source">
<h3>source<a class="headerlink" href="#source" title="Lien permanent vers ce titre">¶</a></h3>
<p>Sélectionne les données météorologiques à tracer. Les valeurs autorisées sont <code class="docutils literal"><span class="pre">&lt;source&gt;raw&lt;/source&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;source&gt;</span> <span class="pre">hourly&lt;/</span> <span class="pre">source&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;source&gt;daily&lt;/source&gt;</span></code> et <code class="docutils literal"><span class="pre">&lt;source&gt;monthly&lt;/source&gt;</span></code>. LA valeur par défaut est raw. Notez que les sources différentes ont des dictionnaires de données différents, donc ce choix affecte ycalc.</p>
</div>
<div class="section" id="boxwidth">
<h3>boxwidth<a class="headerlink" href="#boxwidth" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit la largeur des &#8220;boîtes&#8221; utilisés lors de l&#8217;élaboration des graphes à barres. La valeur est une expression entière pour obtenir un nombre de secondes. Le défaut dépend de la source: brut est de 240, horaire est de 2800 et quotidien est de 2800 * 24.</p>
</div>
<div class="section" id="id1">
<h3>title<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit le titre du graphe. Une seule ligne de texte, par exemple: <code class="docutils literal"><span class="pre">&lt;title&gt;Température</span> <span class="pre">(°C)&lt;/</span> <span class="pre">title&gt;</span></code>. Ce titre apparaît dans la zone de traçage, au-dessus de tous les titres sous-graphes.</p>
</div>
<div class="section" id="command">
<h3>command<a class="headerlink" href="#command" title="Lien permanent vers ce titre">¶</a></h3>
<p>Exécute n&#8217;importe quelle commande gnuplot, juste avant la principale commande de tracé. Cette option permet aux utilisateurs avancés d&#8217;avoir plus de contrôle sur l&#8217;apparence du graphe. La valeur est une commande gnuplot valide, généralement commençant par un ensemble de mots. Par exemple: <code class="docutils literal"><span class="pre">&lt;command&gt;set</span> <span class="pre">key</span> <span class="pre">tmargin</span> <span class="pre">center</span> <span class="pre">horizontal</span> <span class="pre">width</span> <span class="pre">1</span> <span class="pre">noreverse</span> <span class="pre">enhanced</span> <span class="pre">autotitles</span> <span class="pre">box</span> <span class="pre">linetype</span> <span class="pre">-1</span> <span class="pre">linewidth</span> <span class="pre">1&lt;/</span> <span class="pre">command&gt;</span></code>. (Ne me demandez pas ce que cet exemple produit - Je ne suis pas un utilisateur avancé).</p>
</div>
<div class="section" id="xcalc">
<h3>xcalc<a class="headerlink" href="#xcalc" title="Lien permanent vers ce titre">¶</a></h3>
<p>Contrôle le positionnement de l&#8217;axe X du tracé des valeurs de données. La valeur par défaut de data[&#8216;idx&#8217;] est correcte pour la plupart des données, mais il y a quelques exceptions. Par exemple, lors du tracé des diagrammes à barres de pluies horaires, il est bon de centrer les barres sur 30 minutes après l&#8217;heure:  <code class="docutils literal"><span class="pre">&lt;xcalc&gt;data</span> <span class="pre">['idx'].replace(minute=30,</span> <span class="pre">second=0)&lt;/</span> <span class="pre">xcalc&gt;</span></code>.</p>
</div>
<div class="section" id="ycalc">
<h3>ycalc<a class="headerlink" href="#ycalc" title="Lien permanent vers ce titre">¶</a></h3>
<p>Sélectionne les données à tracer. Toute expression Python sur une ligne retournant une valeur flottante simple peut être utilisée. Au plus simple ceci sélectionne une seule valeur du dictionnaire &#8220;data&#8221;, par exemple: <code class="docutils literal"><span class="pre">&lt;ycalc&gt;data['temp_out']&lt;/ycalc&gt;</span></code> trace la température extérieure. Des expressions plus complexes sont possibles, et certaines fonctions d&#8217;aide sont fournies. Par exemple: <code class="docutils literal"><span class="pre">&lt;ycalc&gt;dew_point(data['temp_out'],</span> <span class="pre">data['hum_out'])&lt;/</span> <span class="pre">ycalc&gt;</span></code> trace le point de rosée, et <code class="docutils literal"><span class="pre">&lt;ycalc&gt;wind_mph(data['wind_ave'])&lt;/ycalc&gt;</span></code> trace la vitesse moyenne du vent en miles par heure.</p>
<p>Les courbes cumulatives sont également possibles. Le résultat de chaque calcul ycalc est stocké et mis à la disposition du calcul suivant dans la variable last_ycalc. Ceci peut être utilisé avec toute donnée, mais il est plus utile avec des précipitations: <code class="docutils literal"><span class="pre">&lt;ycalc&gt;data</span> <span class="pre">['rain']</span> <span class="pre">+</span> <span class="pre">last_ycalc&lt;/</span> <span class="pre">ycalc&gt;</span></code>.</p>
</div>
<div class="section" id="axes">
<h3>axes<a class="headerlink" href="#axes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Sélectionne contre quel axe Y les données sont tracées. Par défaut c&#8217;est l&#8217;axe de gauche, mais l&#8217;axe de droite peut être choisie avec: <code class="docutils literal"><span class="pre">&lt;axes&gt;x1y2&lt;/</span> <span class="pre">axes&gt;</span></code>. Ceci peut être utilisé en conjonction avec y2range pour tracer deux quantités indépendantes sur une courbe, par exemple la température et de l&#8217;humidité.</p>
</div>
<div class="section" id="style">
<h3>style<a class="headerlink" href="#style" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit le style de ligne pour le graphe. Le défaut est une ligne continue lisse, d&#8217;épaisseur 1. Pour sélectionner un graphique à barres, utilisez: <code class="docutils literal"><span class="pre">&lt;style&gt;box&lt;/</span> <span class="pre">style&gt;</span></code>. Pour sélectionner des points sans ligne de raccordement, utilisez: <code class="docutils literal"><span class="pre">&lt;style&gt;+&lt;/</span> <span class="pre">style&gt;</span></code> ou <code class="docutils literal"><span class="pre">&lt;style&gt;x&lt;/</span> <span class="pre">style&gt;</span></code>. Pour sélectionner une épaisseur de ligne à 3 (par exemple): <code class="docutils literal"><span class="pre">&lt;style&gt;line</span> <span class="pre">3&lt;/</span> <span class="pre">style&gt;</span></code>. L&#8217;épaisseur des points peut être réglé de la même façon. Pour un contrôle complet (pour utilisateurs avancés) un style gnuplot complet peut être réglé ainsi: <code class="docutils literal"><span class="pre">&lt;style&gt;smooth</span> <span class="pre">unique</span> <span class="pre">lc</span> <span class="pre">5</span> <span class="pre">lw</span> <span class="pre">3&lt;/</span> <span class="pre">style&gt;</span></code>.</p>
</div>
<div class="section" id="colour">
<h3>colour<a class="headerlink" href="#colour" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit la couleur de la ligne de sous-graphe ou des boîtes. Toute valeur entière est acceptée. La charte des couleurs est fixée par gnuplot. La valeur par défaut est la couleur précédente plus un.</p>
</div>
<div class="section" id="id2">
<h3>title<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définit le titre du sous-graphe. Une seule ligne de texte, par exemple: <code class="docutils literal"><span class="pre">&lt;title&gt;Température</span> <span class="pre">(°C)&lt;/</span> <span class="pre">title&gt;</span></code>. Ce titre apparaît dans la zone de graphe, à côté d&#8217;un court segment de la couleur de la ligne utilisée pour le sous-graphe.</p>
</div>
</div>
<div class="section" id="detailed-api">
<h2>API détaillé<a class="headerlink" href="#detailed-api" title="Lien permanent vers ce titre">¶</a></h2>
<p class="rubric">Fonctions</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ApplicationLogger</span></code>(verbose[,&nbsp;logfile])</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">apparent_temp</span></code>(temp,&nbsp;rh,&nbsp;wind)</td>
<td><p class="first last">Calcule la température apparente (sensation réelle), en utilisant la formule de</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><code class="xref py py-obj docutils literal"><span class="pre">cadhumidex</span></code>(temp,&nbsp;humidité)</p>
</td>
<td><p class="first last">Calcule l&#8217;Indice d&#8217;Humidité selon les Normes Météo Canadiennes</p>
</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">dew_point</span></code>(temp,&nbsp;hum)</td>
<td><p class="first last">Calcule le point de rosée, en utilisant la formule provenant de <a class="reference external" href="http://en.wikipedia.org/wiki/Dew_point">http://en.wikipedia.org/wiki/Dew_point</a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">illuminance_wm2</span></code>(lux)</td>
<td><p class="first last">Conversion approximative de la luminosité en lux, au rayonnement solaire en W/m2</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pywws.Plot.main" title="pywws.Plot.main"><code class="xref py py-obj docutils literal"><span class="pre">main</span></code></a>([argv])</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">pressure_inhg</span></code>(hPa)</td>
<td><p class="first last">Converti la pression de hectopascals/millibars, à pouces de mercure</p>
</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">pressure_trend_text</span></code>(trend)</td>
<td><p class="first last">Converti la tendance de la pression en une chaîne, telle qu&#8217;utilisée par le UK Met Office.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">rain_inch</span></code>(mm)</td>
<td><p class="first last">Converti les précipitations de millimètres, à pouces</p>
</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">temp_f</span></code>(c)</td>
<td><p class="first last">Converti la température de Celsius, à Fahrenheit</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><code class="xref py py-obj docutils literal"><span class="pre">usaheatindex</span></code>(temp,&nbsp;humidité,&nbsp;point&nbsp;de&nbsp;rosée)</p>
</td>
<td><p class="first last">Calcule l&#8217;Indice de Chaleur selon les normes du Service Météorologique National USA</p>
</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">wind_bft</span></code>(ms)</td>
<td><p class="first last">Converti la vitesse du vent de mètres par seconde, vers l&#8217;échelle Beaufort</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><code class="xref py py-obj docutils literal"><span class="pre">wind_chill</span></code>(temp,&nbsp;vent)</p>
</td>
<td><p class="first last">Calcule le refroidissement éolien, en utilisant la formule de</p>
</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">wind_kmph</span></code>(ms)</td>
<td><p class="first last">Converti la vitesse du vent de mètres par seconde, à kilomètres par heure</p>
</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">wind_kn</span></code>(ms)</td>
<td><p class="first last">Converti la vitesse du vent de mètres par seconde, à noeuds</p>
</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">wind_mph</span></code>(ms)</td>
<td><p class="first last">Converti la vitesse du vent de mètres par seconde, en miles par heure</p>
</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">winddir_degrees</span></code>(pts)</td>
<td><p class="first last">Converti la direction du vent de 0..15 en degrés</p>
</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">winddir_text</span></code>(pts)</td>
<td><p class="first last">Converti la direction du vent de 0..15, en points cardinaux</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pywws.Plot.BasePlotter" title="pywws.Plot.BasePlotter"><code class="xref py py-obj docutils literal"><span class="pre">BasePlotter</span></code></a>(params,&nbsp;status,&nbsp;raw_data,&nbsp;...)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pywws.Plot.GraphPlotter" title="pywws.Plot.GraphPlotter"><code class="xref py py-obj docutils literal"><span class="pre">GraphPlotter</span></code></a>(params,&nbsp;status,&nbsp;raw_data,&nbsp;...)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pywws.Plot.Record" title="pywws.Plot.Record"><code class="xref py py-obj docutils literal"><span class="pre">Record</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">datetime</span></code>(year,&nbsp;month,&nbsp;day[,&nbsp;hour[,&nbsp;minute[,&nbsp;...)</td>
<td>The year, month and day arguments are required.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">timedelta</span></code></td>
<td><p class="first last">Différence entre deux valeurs de datetime.</p>
</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="pywws.Plot.BasePlotter">
<em class="property">class </em><code class="descclassname">pywws.Plot.</code><code class="descname">BasePlotter</code><span class="sig-paren">(</span><em>params</em>, <em>status</em>, <em>raw_data</em>, <em>hourly_data</em>, <em>daily_data</em>, <em>monthly_data</em>, <em>work_dir</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#BasePlotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.BasePlotter" title="Permalien vers cette définition">¶</a></dt>
<dd><dl class="method">
<dt id="pywws.Plot.BasePlotter.DoPlot">
<code class="descname">DoPlot</code><span class="sig-paren">(</span><em>input_file</em>, <em>output_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#BasePlotter.DoPlot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.BasePlotter.DoPlot" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pywws.Plot.BasePlotter.GetChildren">
<code class="descname">GetChildren</code><span class="sig-paren">(</span><em>node</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#BasePlotter.GetChildren"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.BasePlotter.GetChildren" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pywws.Plot.BasePlotter.GetValue">
<code class="descname">GetValue</code><span class="sig-paren">(</span><em>node</em>, <em>name</em>, <em>default</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#BasePlotter.GetValue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.BasePlotter.GetValue" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pywws.Plot.Record">
<em class="property">class </em><code class="descclassname">pywws.Plot.</code><code class="descname">Record</code><a class="reference internal" href="../_modules/pywws/Plot.html#Record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.Record" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="pywws.Plot.GraphPlotter">
<em class="property">class </em><code class="descclassname">pywws.Plot.</code><code class="descname">GraphPlotter</code><span class="sig-paren">(</span><em>params</em>, <em>status</em>, <em>raw_data</em>, <em>hourly_data</em>, <em>daily_data</em>, <em>monthly_data</em>, <em>work_dir</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#GraphPlotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.GraphPlotter" title="Permalien vers cette définition">¶</a></dt>
<dd><dl class="method">
<dt id="pywws.Plot.GraphPlotter.GetPlotList">
<code class="descname">GetPlotList</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#GraphPlotter.GetPlotList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.GraphPlotter.GetPlotList" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pywws.Plot.GraphPlotter.GetDefaultRows">
<code class="descname">GetDefaultRows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#GraphPlotter.GetDefaultRows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.GraphPlotter.GetDefaultRows" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pywws.Plot.GraphPlotter.GetDefaultPlotSize">
<code class="descname">GetDefaultPlotSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#GraphPlotter.GetDefaultPlotSize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.GraphPlotter.GetDefaultPlotSize" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pywws.Plot.GraphPlotter.GetPreamble">
<code class="descname">GetPreamble</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#GraphPlotter.GetPreamble"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.GraphPlotter.GetPreamble" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pywws.Plot.GraphPlotter.PlotData">
<code class="descname">PlotData</code><span class="sig-paren">(</span><em>plot_no</em>, <em>plot</em>, <em>source</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#GraphPlotter.PlotData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.GraphPlotter.PlotData" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="pywws.Plot.main">
<code class="descclassname">pywws.Plot.</code><code class="descname">main</code><span class="sig-paren">(</span><em>argv=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pywws/Plot.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pywws.Plot.main" title="Permalien vers cette définition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/pywws_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table des Matières</a></h3>
  <ul>
<li><a class="reference internal" href="#">pywws.Plot</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#xml-graph-file-syntax">Syntaxe XML du fichier graphe</a></li>
<li><a class="reference internal" href="#graph">graph</a></li>
<li><a class="reference internal" href="#plot">plot</a></li>
<li><a class="reference internal" href="#start">start</a></li>
<li><a class="reference internal" href="#stop">stop</a></li>
<li><a class="reference internal" href="#duration">duration</a></li>
<li><a class="reference internal" href="#layout">layout</a></li>
<li><a class="reference internal" href="#size">size</a></li>
<li><a class="reference internal" href="#fileformat">fileformat</a></li>
<li><a class="reference internal" href="#terminal">terminal</a></li>
<li><a class="reference internal" href="#lmargin">lmargin</a></li>
<li><a class="reference internal" href="#rmargin">rmargin</a></li>
<li><a class="reference internal" href="#xformat">xformat</a></li>
<li><a class="reference internal" href="#xlabel">xlabel</a></li>
<li><a class="reference internal" href="#dateformat">dateformat</a></li>
<li><a class="reference internal" href="#xtics">xtics</a></li>
<li><a class="reference internal" href="#title">title</a></li>
<li><a class="reference internal" href="#subplot">subplot</a></li>
<li><a class="reference internal" href="#bmargin">bmargin</a></li>
<li><a class="reference internal" href="#yrange">yrange</a></li>
<li><a class="reference internal" href="#y2range">y2range</a></li>
<li><a class="reference internal" href="#ytics">ytics</a></li>
<li><a class="reference internal" href="#y2tics">y2tics</a></li>
<li><a class="reference internal" href="#ylabel">ylabel</a></li>
<li><a class="reference internal" href="#ylabelangle">ylabelangle</a></li>
<li><a class="reference internal" href="#y2label">y2label</a></li>
<li><a class="reference internal" href="#y2labelangle">y2labelangle</a></li>
<li><a class="reference internal" href="#grid">grid</a></li>
<li><a class="reference internal" href="#source">source</a></li>
<li><a class="reference internal" href="#boxwidth">boxwidth</a></li>
<li><a class="reference internal" href="#id1">title</a></li>
<li><a class="reference internal" href="#command">command</a></li>
<li><a class="reference internal" href="#xcalc">xcalc</a></li>
<li><a class="reference internal" href="#ycalc">ycalc</a></li>
<li><a class="reference internal" href="#axes">axes</a></li>
<li><a class="reference internal" href="#style">style</a></li>
<li><a class="reference internal" href="#colour">colour</a></li>
<li><a class="reference internal" href="#id2">title</a></li>
</ul>
</li>
<li><a class="reference internal" href="#detailed-api">API détaillé</a></li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="pywws.calib.html"
                        title="Chapitre précédent">pywws.calib</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="pywws.WindRose.html"
                        title="Chapitre suivant">pywws.WindRose</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="pywws.WindRose.html" title="pywws.WindRose"
             >suivant</a> |</li>
        <li class="right" >
          <a href="pywws.calib.html" title="pywws.calib"
             >précédent</a> |</li>
        <li><a href="../index.html">documentation pywws 13.09_r1069</a> &raquo;</li>
          <li><a href="index.html" >Programmes et des modules Python</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2008-13, Jim Easterbrook.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b2.
    </div>
  </body>
</html>